# SAM 2 Video Segmenter

Metaμ **SAM 2 (Segment Anything Model 2)**λ¥Ό ν™μ©ν•μ—¬ λΉ„λ””μ¤ λ‚΄μ κ°μ²΄λ¥Ό μΈν„°λ™ν‹°λΈν•κ² λ¶„ν• (Segmentation)ν•κ³  μ¶”μ (Tracking)ν•λ” μ›Ή μ„λΉ„μ¤μ…λ‹λ‹¤.

μ‚¬μ©μκ°€ λΉ„λ””μ¤λ¥Ό μ—…λ΅λ“ν•κ³  μ¶”μ ν•κ³  μ‹¶μ€ κ°μ²΄(μ: μ¥, μ‚¬λ, μλ™μ°¨ λ“±)λ¥Ό ν΄λ¦­ν•λ©΄, AIκ°€ μλ™μΌλ΅ ν•΄λ‹Ή κ°μ²΄λ¥Ό μΈμ‹ν•μ—¬ μμƒ μ „μ²΄μ—μ„ μ¶”μ ν•κ³  λ¶„ν• λ κ²°κ³Όλ¥Ό λ³΄μ—¬μ¤λ‹λ‹¤.

## π“Έ λ™μ‘ ν™”λ©΄

### 1. λ©”μΈ ν™”λ©΄ (λΉ„λ””μ¤ μ—…λ΅λ“)
μ„λΉ„μ¤μ— μ ‘μ†ν•λ©΄ κ°€μ¥ λ¨Όμ € λ³΄μ΄λ” ν™”λ©΄μ…λ‹λ‹¤. λ¶„μ„ν•  λΉ„λ””μ¤ νμΌ(MP4, MOV λ“±)μ„ μ—…λ΅λ“ν•©λ‹λ‹¤.
![Upload Screen](assets/upload_screen.png)

### 2. κ°μ²΄ μ„ νƒ (μΈν„°λ™μ…)
λΉ„λ””μ¤κ°€ λ΅λ“λλ©΄ μ²« λ²μ§Έ ν”„λ μ„μ΄ ν‘μ‹λ©λ‹λ‹¤. μ—¬κΈ°μ„ μ¶”μ ν•κ³  μ‹¶μ€ κ°μ²΄μ μ¤‘μ‹¬μ„ λ§μ°μ¤λ΅ ν΄λ¦­ν•©λ‹λ‹¤. ν΄λ¦­ν• μ§€μ μ€ λΉ¨κ°„μƒ‰ μ μΌλ΅ ν‘μ‹λλ©°, μ—¬λ¬ κ°μ²΄λ¥Ό λ™μ‹μ— μ¶”μ ν•  μλ„ μμµλ‹λ‹¤. μ„ νƒμ΄ μ™„λ£λλ©΄ **"Segment Video"** λ²„νΌμ„ λ„λ¦…λ‹λ‹¤.
![Interaction Screen](assets/interaction_screen.png)

### 3. κ²°κ³Ό ν™•μΈ λ° λ‹¤μ΄λ΅λ“
AI λ¶„μ„μ΄ μ™„λ£λλ©΄ μ›λ³Έ μμƒκ³Ό μ„Έκ·Έλ©ν…μ΄μ…λ μμƒμ΄ λ‚λ€ν ν‘μ‹λ©λ‹λ‹¤. μ°μΈ΅ μμƒμ—μ„ κ°μ²΄κ°€ μƒ‰μƒμΌλ΅ κµ¬λ¶„λμ–΄ μ¶”μ λλ” κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤. **"Download Video"** λ²„νΌμ„ λλ¬ κ²°κ³Ό μμƒμ„ MP4 νμΌλ΅ μ €μ¥ν•  μ μμµλ‹λ‹¤.
![Result Screen](assets/result_screen.png)

---

## π› οΈ μ„¤μΉ λ° μ‹¤ν–‰ κ°€μ΄λ“

μ΄ ν”„λ΅μ νΈλ” Python (FastAPI) λ°±μ—”λ“μ™€ HTML/JS ν”„λ΅ νΈμ—”λ“λ΅ κµ¬μ„±λμ–΄ μμµλ‹λ‹¤. Windowsμ™€ Linux ν™κ²½ λ¨λ‘μ—μ„ μ‹¤ν–‰ κ°€λ¥ν•©λ‹λ‹¤.

### μ‚¬μ „ μ”κµ¬ μ‚¬ν•­ (Prerequisites)
- **Python 3.10 μ΄μƒ**μ΄ μ„¤μΉλμ–΄ μμ–΄μ•Ό ν•©λ‹λ‹¤.
- **Replicate API Token**μ΄ ν•„μ”ν•©λ‹λ‹¤. [Replicate](https://replicate.com/)μ—μ„ κ³„μ •μ„ μƒμ„±ν•κ³  ν† ν°μ„ λ°κΈ‰λ°›μΌμ„Έμ”. (μ΄ λ¨λΈμ€ μ λ£ ν¬λ λ”§μ΄ ν•„μ”ν•  μ μμµλ‹λ‹¤.)

### 1. ν”„λ΅μ νΈ ν΄λ΅  (Clone)
```bash
git clone https://github.com/bellmake/sam2-video-segmenter.git
cd sam2-video-segmenter
```

### 2. κ°€μƒν™κ²½ μƒμ„± λ° ν™μ„±ν™” (Conda κ¶μ¥)

μ΄ ν”„λ΅μ νΈλ” `conda` κ°€μƒν™κ²½ μ‚¬μ©μ„ κ¶μ¥ν•©λ‹λ‹¤.

```bash
# Conda ν™κ²½ μƒμ„± (Python 3.10)
conda create -n sam2 python=3.10 -y

# κ°€μƒν™κ²½ ν™μ„±ν™”
conda activate sam2
```

### 3. μμ΅΄μ„± ν¨ν‚¤μ§€ μ„¤μΉ
```bash
pip install -r requirements.txt
```

### 4. ν™κ²½ λ³€μ μ„¤μ • (.env)
ν”„λ΅μ νΈ λ£¨νΈ κ²½λ΅μ— `.env` νμΌμ„ μƒμ„±ν•κ³ , λ°κΈ‰λ°›μ€ Replicate API ν† ν°μ„ μ…λ ¥ν•©λ‹λ‹¤.

**`.env` νμΌ μƒμ„±:**
```bash
# Linux/macOS
touch .env

# Windows (λ©”λ¨μ¥μΌλ΅ μƒμ„±)
notepad .env
```

**`.env` νμΌ λ‚΄μ©:**
```env
REPLICATE_API_TOKEN=r8_YourReplicateTokenHere...
```
> **μ£Όμ:** `r8_`λ΅ μ‹μ‘ν•λ” μ‹¤μ  ν† ν° κ°’μ„ μ…λ ¥ν•΄μ•Ό ν•©λ‹λ‹¤.

### 5. μ„λ²„ μ‹¤ν–‰
```bash
uvicorn main:app --reload
```
μ„λ²„κ°€ μ •μƒμ μΌλ΅ μ‹¤ν–‰λλ©΄ ν„°λ―Έλ„μ— `Uvicorn running on http://127.0.0.1:8000` λ©”μ‹μ§€κ°€ ν‘μ‹λ©λ‹λ‹¤.

### 6. μ›Ή μ„λΉ„μ¤ μ ‘μ†
μ›Ή λΈλΌμ°μ €(Chrome κ¶μ¥)λ¥Ό μ—΄κ³  μ•„λ μ£Όμ†λ΅ μ ‘μ†ν•©λ‹λ‹¤.
[http://localhost:8000/static/index.html](http://localhost:8000/static/index.html)

---

## β οΈ νΈλ¬λΈ”μν… (Troubleshooting)

**Q. "Segmentation failed" μ¤λ¥κ°€ λ°μƒν•΄μ”.**
- **401 Unauthorized**: `.env` νμΌμ— ν† ν°μ΄ μ •ν™•ν μ…λ ¥λμ—λ”μ§€ ν™•μΈν•μ„Έμ”.
- **402 Insufficient Credit**: Replicate κ³„μ •μ— ν¬λ λ”§μ΄ λ¶€μ΅±ν• κ²½μ°μ…λ‹λ‹¤. Billing νμ΄μ§€μ—μ„ μ¶©μ „μ΄ ν•„μ”ν•©λ‹λ‹¤.
- **Timeout**: μμƒμ΄ λ„λ¬΄ κΈΈκ±°λ‚ κ³ ν™”μ§μΈ κ²½μ° μ²λ¦¬κ°€ μ¤λ κ±Έλ ¤ νƒ€μ„μ•„μ›ƒμ΄ λ°μƒν•  μ μμµλ‹λ‹¤. (ν„μ¬ μ½”λ“λ” 10λ¶„ λ€κΈ°ν•λ„λ΅ μ„¤μ •λ¨)

**Q. μ—…λ΅λ“κ°€ μ• λΌμ”.**
- νμΌ μ©λ‰μ΄ λ„λ¬΄ ν¬μ§€ μ•μ€μ§€ ν™•μΈν•μ„Έμ”. μ§§μ€ ν΄λ¦½(1λ¶„ μ΄λ‚΄)μΌλ΅ ν…μ¤νΈν•λ” κ²ƒμ„ κ¶μ¥ν•©λ‹λ‹¤.

---

## π“‚ ν”„λ΅μ νΈ κµ¬μ΅°
```
sam2-video-segmenter/
β”β”€β”€ main.py              # FastAPI λ°±μ—”λ“ μ„λ²„
β”β”€β”€ requirements.txt     # νμ΄μ¬ μμ΅΄μ„± λ©λ΅
β”β”€β”€ .env                 # ν™κ²½ λ³€μ (API ν† ν°) - *μ§μ ‘ μƒμ„± ν•„μ”*
β”β”€β”€ static/              # ν”„λ΅ νΈμ—”λ“ μ •μ  νμΌ
β”‚   β”β”€β”€ index.html       # λ©”μΈ νμ΄μ§€
β”‚   β”β”€β”€ script.js        # ν”„λ΅ νΈμ—”λ“ λ΅μ§
β”‚   β””β”€β”€ style.css        # μ¤νƒ€μΌμ‹νΈ
β””β”€β”€ assets/              # μ¤ν¬λ¦°μƒ· μ΄λ―Έμ§€
```
